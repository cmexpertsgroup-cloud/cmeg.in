<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CMBOOKS – Parties</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{font-family:Roboto,sans-serif;background:#f4f6f9;margin:0}
.container{padding:20px}
.header-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
h1{font-size:24px}

.btn{
padding:10px 16px;border:none;border-radius:6px;
font-weight:600;cursor:pointer
}
.btn-primary{background:#2962ff;color:#fff}
.btn-danger{background:#d32f2f;color:#fff}

.table-wrap{background:#fff;border-radius:10px;border:1px solid #e0e0e0}
table{width:100%;border-collapse:collapse}
th,td{padding:12px 14px;border-bottom:1px solid #eee;text-align:left}
th{background:#f9fafc;font-size:12px;text-transform:uppercase;color:#777}
tr:hover{background:#f4f6f9}

.badge{
padding:4px 10px;border-radius:20px;font-size:12px;font-weight:600
}
.badge-customer{background:#e3f2fd;color:#1565c0}
.badge-supplier{background:#f1f8e9;color:#2e7d32}
.badge-both{background:#ede7f6;color:#512da8}

.modal{
display:none;position:fixed;top:0;left:0;right:0;bottom:0;
background:rgba(0,0,0,0.4);align-items:center;justify-content:center
}
.modal.show{display:flex}
.modal-box{
background:#fff;border-radius:10px;width:90%;max-width:500px
}
.modal-header{
padding:16px;border-bottom:1px solid #eee;
display:flex;justify-content:space-between;align-items:center
}
.modal-body{padding:16px}
.modal-footer{
padding:12px 16px;border-top:1px solid #eee;
display:flex;justify-content:flex-end;gap:8px
}

.form-group{margin-bottom:12px}
.form-group label{font-size:13px;font-weight:600;display:block;margin-bottom:4px}
.form-group input,.form-group select{
width:100%;padding:8px;border:1px solid #ccc;border-radius:5px
}
</style>
</head>

<body>

<div class="container">

<div class="header-row">
  <h1>Parties</h1>
  <button class="btn btn-primary" onclick="openModal()">+ Add Party</button>
</div>

<div class="table-wrap">
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Contact</th>
<th>Email</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="partyTable">
<tr>
<td colspan="5" style="text-align:center;color:#888">No parties added</td>
</tr>
</tbody>
</table>
</div>

</div>

<!-- MODAL -->
<div class="modal" id="partyModal">
<div class="modal-box">
<div class="modal-header">
<h3 id="modalTitle">Add Party</h3>
<button onclick="closeModal()">✕</button>
</div>

<div class="modal-body">
<div class="form-group">
<label>Party Name</label>
<input id="partyName" placeholder="Business / Person name">
</div>

<div class="form-group">
<label>Party Type</label>
<select id="partyType">
<option value="customer">Customer</option>
<option value="supplier">Supplier</option>
<option value="both">Both</option>
</select>
</div>

<div class="form-group">
<label>Contact Number</label>
<input id="partyContact" placeholder="Mobile / Phone">
</div>

<div class="form-group">
<label>Email</label>
<input id="partyEmail" placeholder="Email address">
</div>
</div>

<div class="modal-footer">
<button class="btn" onclick="closeModal()">Cancel</button>
<button class="btn btn-primary" onclick="saveParty()">Save</button>
</div>
</div>
</div>

<script>
let parties=[];
let editIndex=null;

function openModal(index=null){
  document.getElementById('partyModal').classList.add('show');
  editIndex=index;
  if(index!==null){
    const p=parties[index];
    partyName.value=p.name;
    partyType.value=p.type;
    partyContact.value=p.contact;
    partyEmail.value=p.email;
    modalTitle.innerText='Edit Party';
  }else{
    partyName.value='';
    partyContact.value='';
    partyEmail.value='';
    partyType.value='customer';
    modalTitle.innerText='Add Party';
  }
}

function closeModal(){
  document.getElementById('partyModal').classList.remove('show');
}

function saveParty(){
  const p={
    name:partyName.value,
    type:partyType.value,
    contact:partyContact.value,
    email:partyEmail.value
  };
  if(editIndex!==null){
    parties[editIndex]=p;
  }else{
    parties.push(p);
  }
  editIndex=null;
  renderTable();
  closeModal();
}

function renderTable(){
  const tbody=document.getElementById('partyTable');
  if(parties.length===0){
    tbody.innerHTML='<tr><td colspan="5" style="text-align:center;color:#888">No parties added</td></tr>';
    return;
  }
  tbody.innerHTML=parties.map((p,i)=>`
  <tr>
    <td>${p.name}</td>
    <td><span class="badge badge-${p.type}">${p.type.toUpperCase()}</span></td>
    <td>${p.contact||'-'}</td>
    <td>${p.email||'-'}</td>
    <td>
      <button onclick="openModal(${i})">Edit</button>
      <button class="btn-danger" onclick="deleteParty(${i})">Delete</button>
    </td>
  </tr>
  `).join('');
}

function deleteParty(i){
  if(confirm('Delete this party?')){
    parties.splice(i,1);
    renderTable();
  }
}
</script>

</body>
</html>
